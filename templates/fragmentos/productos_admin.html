<section class="admin-dashboard">
    <h2>Gesti√≥n de Productos</h2>

    <!-- FORMULARIO PARA AGREGAR -->
    <form id="formAgregar" method="POST" action="/admin/producto/crear">
        <input type="text"   name="descripcion" placeholder="Descripci√≥n" required>
        <input type="number" name="costo"       step="0.01" placeholder="Costo"      required>
        <select name="stock" required>
            <option value="existencia">En existencia</option>
            <option value="agotado">Agotado</option>
        </select>
        <input type="text" name="imagen" placeholder="URL de la imagen (opcional)">
        <button type="submit">Agregar Producto</button>
    </form>

    <hr>

    <!-- LISTADO DE PRODUCTOS -->
    <table border="1" cellpadding="5">
        <thead>
            <tr>
                <th>ID</th>
                <th>Descripci√≥n</th>
                <th>Costo</th>
                <th>Stock</th>
                <th>Imagen</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for p in productos %}
            <tr>
                <form method="POST" action="/admin/producto/editar/{{ p.id_producto }}">
                    <td>{{ p.id_producto }}</td>
                    <td>
                        <input 
                            type="text" 
                            name="descripcion" 
                            value="{{ p.descripcion }}" 
                            required
                        >
                    </td>
                    <td>
                        <input 
                            type="number" 
                            name="costo" 
                            step="0.01" 
                            value="{{ "%.2f"|format(p.costo) }}" 
                            required
                        >
                    </td>
                    <td>
                        <select name="stock" required>
                            <option value="existencia" {% if p.stock == 'existencia' %}selected{% endif %}>
                                En existencia
                            </option>
                            <option value="agotado" {% if p.stock == 'agotado' %}selected{% endif %}>
                                Agotado
                            </option>
                        </select>
                    </td>
                    <td>
                        {% if p.imagen %}
                            <img src="{{ p.imagen }}" alt="Imagen" width="60">
                        {% else %}
                            <input type="text" name="imagen" placeholder="URL de la imagen">
                        {% endif %}
                    </td>
                    <td>
                        <button type="submit">Guardar</button>
                </form>
                <form method="POST" action="/admin/producto/eliminar/{{ p.id_producto }}" style="display:inline;">
                    <button type="submit" onclick="return confirm('¬øEliminar este producto?')">üóëÔ∏è</button>
                </form>
                    </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

<link rel="stylesheet" href="{{ url_for('static', filename='css/producto.css') }}">
